<h2>Projects</h2>
<div data-controller="project-performance"
     data-project-performance-current-year="<%= Time.current.year %>"
     data-project-performance-url="<%= url_for(only_path: true, format: :json) %>">

  <div class="mb-2">
    <button data-action="click->project-performance#previousYear">← Prev</button>
    <span id="year-label"><%= Time.current.year %></span>
    <button data-action="click->project-performance#nextYear">Next →</button>
  </div>

  <canvas id="projectPerformanceChart" width="400" height="200"></canvas>
</div>

<table class="table table-striped">
  <thead>
    <tr>
      <th>Name</th>
      <th>Client</th>
      <th>Start&nbsp;Date</th>
      <th>End&nbsp;Date</th>
      <th>Status</th>
      <th>Details</th>
    </tr>
  </thead>

  <tbody>
    <% projects.each do |project| %>
      <tr>
        <td><%= project.name %></td>
        <td><%= project.client.first_name %><%= project.client.last_name %></td>
        <td><%= project.project_date&.start_date&.strftime("%Y-%m-%d") %></td>
        <td><%= project.project_date&.end_date&.strftime("%Y-%m-%d") %></td>
        <td><%= project.status ? "Active" : "Inactive" %></td>
        <td>
          <%= link_to "Project", project_path(project), data: { turbo_frame: "_top" }, class: "text-decoration-none" %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
