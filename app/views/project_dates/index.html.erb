<% if params[:view] == "year" %>
  <%= link_to "Show Month Calendar", project_dates_path, class: "btn btn-outline-primary mb-3" %>
<% else %>
  <%= link_to "Show Year Calendar", project_dates_path(view: "year"), class: "btn btn-outline-primary mb-3" %>
<% end %>

<div style="display: flex;">
  <div style="flex: 2; margin-right: 2rem;">
    <h2>Project Dates</h2>
    <div class="calendar-container">
      <% if params[:view] == "year" %>
        <%= render "year_calendar", project_dates: @project_dates %>
      <% else %>
        <%= month_calendar(events: @project_dates, start_time: :start_date, end_time: :end_date) do |date, project_dates| %>
          <%= date %>
          <% project_dates.each_with_index do |project_date, idx| %>
            <div class="calendar-event color-<%= idx % 5 %>">
              <%= link_to project_date.project&.name, project_date_path(project_date) %><br>
              <%= project_date.start_date.strftime("%Y-%m-%d") %> to <%= project_date.end_date.strftime("%Y-%m-%d") %>
            </div>
          <% end %>
        <% end %>
      <% end %>
    </div>

    <ul>
      <% @project_dates.each do |project_date| %>
        <li>
          <%= link_to project_date.project&.name, project_date_path(project_date) %>:
          <%= project_date.start_date.strftime("%Y-%m-%d") %> to
          <%= project_date.end_date.strftime("%Y-%m-%d") %>
        </li>
      <% end %>
    </ul>
  </div>
  <div style="flex: 1;">
    <h2>New Project Date</h2>
    <%= render "shared/project_datesForm", project_date: @project_date %>
  </div>
</div>
